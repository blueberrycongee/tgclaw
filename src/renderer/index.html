<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TGClaw</title>
</head>
<body>

  <!-- 左侧栏 -->
  <div id="sidebar">
    <div id="sidebar-header">
      <span class="brand-icon" id="brand-icon"></span>
      <span class="brand-text">TGClaw</span>
    </div>

    <!-- OpenClaw 置顶 -->
    <div class="sidebar-item pinned active" data-id="openclaw">
      <div class="icon" id="openclaw-icon"></div>
      <div class="item-info">
        <div class="item-name-row">
          <div class="item-name">OpenClaw</div>
          <span class="openclaw-badge" id="openclaw-badge"></span>
        </div>
        <div class="item-status">Agent orchestrator</div>
      </div>
    </div>

    <!-- 项目列表 -->
    <div id="project-list"></div>

    <div id="add-project">+ Add Project</div>
  </div>

  <!-- 右侧面板 -->
  <div id="panel">
    <!-- Tab bar (项目模式才显示) -->
    <div id="tabbar">
      <div id="tab-list"></div>
      <div id="add-tab" title="New Tab"></div>
      <button id="theme-toggle" class="theme-toggle-btn" title="Toggle Theme"></button>
    </div>

    <div id="quick-launch-bar">
      <span class="quick-launch-label">Quick Agents</span>
      <button class="quick-agent-btn" data-agent-type="codex">
        <span class="quick-agent-icon" data-agent-icon="codex"></span>
        <span>Codex</span>
      </button>
      <button class="quick-agent-btn" data-agent-type="claude-code">
        <span class="quick-agent-icon" data-agent-icon="claude-code"></span>
        <span>Claude Code</span>
      </button>
      <button class="quick-agent-btn" data-agent-type="opencode">
        <span class="quick-agent-icon" data-agent-icon="opencode"></span>
        <span>OpenCode</span>
      </button>
      <button class="quick-agent-btn" data-agent-type="gemini">
        <span class="quick-agent-icon" data-agent-icon="gemini"></span>
        <span>Gemini CLI</span>
      </button>
      <button class="quick-agent-btn" data-agent-type="kimi">
        <span class="quick-agent-icon" data-agent-icon="kimi"></span>
        <span>Kimi CLI</span>
      </button>
    </div>

    <!-- 终端容器 -->
    <div id="terminal-container">
      <div id="terminal-search">
        <input id="terminal-search-input" type="text" placeholder="Search terminal..." />
        <button class="terminal-search-btn" id="terminal-search-prev" title="Previous (Shift+Enter)"></button>
        <button class="terminal-search-btn" id="terminal-search-next" title="Next (Enter)"></button>
        <button class="terminal-search-btn" id="terminal-search-close" title="Close (Esc)"></button>
      </div>

      <!-- Chat 面板 (OpenClaw) -->
      <div id="chat-panel" class="active">
        <div id="chat-header">
          <div class="chat-header-title">OpenClaw</div>
          <div class="chat-header-right">
            <div class="chat-header-status">
              <span class="status-dot" id="chat-status-dot"></span>
              <span id="chat-status-text">Offline</span>
            </div>
            <button id="gateway-settings-btn" class="chat-header-btn" title="Gateway Settings"></button>
          </div>
        </div>
        <div id="chat-messages">
          <div class="message from-bot">Hey! I'm OpenClaw. Tell me what you need. I'll dispatch agents to get it done.</div>
        </div>
        <div id="chat-input-bar">
          <textarea id="chat-input" rows="1" placeholder="Message OpenClaw..."></textarea>
          <button id="chat-stop" style="display:none" title="Stop generating"></button>
          <button id="chat-send" title="Send"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Agent 选择弹窗 -->
  <div class="agent-picker" id="agent-picker">
    <div class="agent-picker-inner">
      <h3>Launch Agent</h3>
      <div class="agent-option" data-agent-type="claude-code">
        <span class="agent-option-icon" data-agent-icon="claude-code"></span>
        <span class="agent-option-label">Claude Code</span>
      </div>
      <div class="agent-option" data-agent-type="codex">
        <span class="agent-option-icon" data-agent-icon="codex"></span>
        <span class="agent-option-label">Codex</span>
      </div>
      <div class="agent-option" data-agent-type="opencode">
        <span class="agent-option-icon" data-agent-icon="opencode"></span>
        <span class="agent-option-label">OpenCode</span>
      </div>
      <div class="agent-option" data-agent-type="gemini">
        <span class="agent-option-icon" data-agent-icon="gemini"></span>
        <span class="agent-option-label">Gemini CLI</span>
      </div>
      <div class="agent-option" data-agent-type="kimi">
        <span class="agent-option-icon" data-agent-icon="kimi"></span>
        <span class="agent-option-label">Kimi CLI</span>
      </div>
      <div class="agent-option" data-agent-type="goose">
        <span class="agent-option-icon" data-agent-icon="goose"></span>
        <span class="agent-option-label">Goose</span>
      </div>
      <div class="agent-option" data-agent-type="aider">
        <span class="agent-option-icon" data-agent-icon="aider"></span>
        <span class="agent-option-label">Aider</span>
      </div>
      <div class="agent-option" data-agent-type="shell">
        <span class="agent-option-icon" data-agent-icon="shell"></span>
        <span class="agent-option-label">Shell</span>
      </div>
    </div>
  </div>

  <div class="gateway-settings" id="gateway-settings">
    <div class="gateway-settings-inner">
      <div class="gateway-settings-header">
        <h3>Gateway Settings</h3>
        <button id="gateway-settings-close" class="gateway-close-btn" title="Close"></button>
      </div>
      <label class="gateway-field" for="gateway-url">
        Gateway URL
        <input id="gateway-url" type="text" value="ws://localhost:18789" />
      </label>
      <label class="gateway-field" for="gateway-token">
        Token
        <input id="gateway-token" type="password" />
      </label>
      <div class="gateway-actions">
        <button id="gateway-connect">Connect</button>
        <button id="gateway-disconnect">Disconnect</button>
      </div>
      <div class="gateway-status-row">
        Status:
        <span id="gateway-connection-status">Disconnected</span>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
